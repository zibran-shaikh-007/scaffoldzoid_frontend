{"ast":null,"code":"import _asyncToGenerator from\"/Users/zibranshaikh/Downloads/scaffoldzoid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _regeneratorRuntime from\"/Users/zibranshaikh/Downloads/scaffoldzoid/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";var _marked=/*#__PURE__*/_regeneratorRuntime.mark(watchLoginUser),_marked2=/*#__PURE__*/_regeneratorRuntime.mark(loginWithEmailPassword),_marked3=/*#__PURE__*/_regeneratorRuntime.mark(watchRegisterUser),_marked4=/*#__PURE__*/_regeneratorRuntime.mark(registerWithEmailPassword),_marked5=/*#__PURE__*/_regeneratorRuntime.mark(watchLogoutUser),_marked6=/*#__PURE__*/_regeneratorRuntime.mark(logout),_marked7=/*#__PURE__*/_regeneratorRuntime.mark(rootSaga);import{all,call,fork,put,takeEvery}from'redux-saga/effects';import axios from\"axios\";import{NotificationManager}from'react-notifications';import{LOGIN_USER,REGISTER_USER,LOGOUT_USER}from'../actions';import{loginUserSuccess,loginUserError,registerUserSuccess,registerUserError}from'./actions';import{setCurrentUser}from'../../helpers/Utils';import{API_URL}from\"../../apiUrl.js\";export function watchLoginUser(){return _regeneratorRuntime.wrap(function watchLoginUser$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return takeEvery(LOGIN_USER,loginWithEmailPassword);case 2:case\"end\":return _context.stop();}}},_marked);}var loginWithEmailPasswordAsync=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password,history){return _regeneratorRuntime.wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"\".concat(API_URL,\"/user/login\"),{email:email,password:password}).then(function(user){/* console.log(\"user\", user) */if(user.status===200){setCurrentUser(user.data.data);put(loginUserSuccess(user.data.data));NotificationManager.success(user.data.message);if(user.data.data.role===\"seller\"){history.push(\"/seller\");}else if(user.data.data.role===\"buyer\"){history.push(\"/buyer\");}}else if(user.status===206){put(loginUserError(user.data.message));NotificationManager.warning(user.data.message);}}).catch(function(error){return NotificationManager.warning(error);});case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}},_callee);}));return function loginWithEmailPasswordAsync(_x,_x2,_x3){return _ref.apply(this,arguments);};}();function loginWithEmailPassword(_ref2){var payload,_payload$user,email,password,history;return _regeneratorRuntime.wrap(function loginWithEmailPassword$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:payload=_ref2.payload;_payload$user=payload.user,email=_payload$user.email,password=_payload$user.password;history=payload.history;_context3.next=5;return call(loginWithEmailPasswordAsync,email,password,history);case 5:case\"end\":return _context3.stop();}}},_marked2);}export function watchRegisterUser(){return _regeneratorRuntime.wrap(function watchRegisterUser$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return takeEvery(REGISTER_USER,registerWithEmailPassword);case 2:case\"end\":return _context4.stop();}}},_marked3);}var registerWithEmailPasswordAsync=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username,email,password,role,history){return _regeneratorRuntime.wrap(function _callee2$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.post(\"\".concat(API_URL,\"/user/register\"),{username:username,email:email,password:password,role:role}).then(function(user){if(user.status===200){put(registerUserSuccess(user.data.data));NotificationManager.success(user.data.message);history.push('/login');}else if(user.status===206){put(registerUserError(user.data.message));NotificationManager.warning(user.data.message);}}).catch(function(error){NotificationManager.warning(error,'Registeration Error',3000,null,null,'');});case 2:return _context5.abrupt(\"return\",_context5.sent);case 3:case\"end\":return _context5.stop();}}},_callee2);}));return function registerWithEmailPasswordAsync(_x4,_x5,_x6,_x7,_x8){return _ref3.apply(this,arguments);};}();function registerWithEmailPassword(_ref4){var payload,_payload$user2,username,email,password,role,history;return _regeneratorRuntime.wrap(function registerWithEmailPassword$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:payload=_ref4.payload;console.log(\"value register\",payload);_payload$user2=payload.user,username=_payload$user2.username,email=_payload$user2.email,password=_payload$user2.password,role=_payload$user2.role;history=payload.history;_context6.prev=4;_context6.next=7;return call(registerWithEmailPasswordAsync,username,email,password,role,history);case 7:_context6.next=13;break;case 9:_context6.prev=9;_context6.t0=_context6[\"catch\"](4);_context6.next=13;return put(registerUserError(_context6.t0));case 13:case\"end\":return _context6.stop();}}},_marked4,null,[[4,9]]);}export function watchLogoutUser(){return _regeneratorRuntime.wrap(function watchLogoutUser$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return takeEvery(LOGOUT_USER,logout);case 2:case\"end\":return _context7.stop();}}},_marked5);}function logout(_ref5){var payload,history;return _regeneratorRuntime.wrap(function logout$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:payload=_ref5.payload;history=payload.history;setCurrentUser();history.push(\"/\");case 4:case\"end\":return _context8.stop();}}},_marked6);}export default function rootSaga(){return _regeneratorRuntime.wrap(function rootSaga$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return all([fork(watchLoginUser),fork(watchLogoutUser),fork(watchRegisterUser)]);case 2:case\"end\":return _context9.stop();}}},_marked7);}","map":{"version":3,"sources":["/Users/zibranshaikh/Downloads/scaffoldzoid/frontend/src/redux/auth/saga.js"],"names":["watchLoginUser","loginWithEmailPassword","watchRegisterUser","registerWithEmailPassword","watchLogoutUser","logout","rootSaga","all","call","fork","put","takeEvery","axios","NotificationManager","LOGIN_USER","REGISTER_USER","LOGOUT_USER","loginUserSuccess","loginUserError","registerUserSuccess","registerUserError","setCurrentUser","API_URL","loginWithEmailPasswordAsync","email","password","history","post","then","user","status","data","success","message","role","push","warning","catch","error","payload","registerWithEmailPasswordAsync","username","console","log"],"mappings":"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","sourcesContent":["import { all, call, fork, put, takeEvery } from 'redux-saga/effects';\nimport axios from \"axios\"\nimport { NotificationManager } from 'react-notifications';\n\n\nimport {\n  LOGIN_USER,\n  REGISTER_USER,\n  LOGOUT_USER,\n\n} from '../actions';\n\nimport {\n  loginUserSuccess,\n  loginUserError,\n  registerUserSuccess,\n  registerUserError,\n\n} from './actions';\nimport { setCurrentUser } from '../../helpers/Utils';\nimport { API_URL } from \"../../apiUrl.js\"\n\n\nexport function* watchLoginUser() {\n  yield takeEvery(LOGIN_USER, loginWithEmailPassword);\n}\n\nconst loginWithEmailPasswordAsync = async (email, password, history) =>\n\n  await axios.post(`${API_URL}/user/login`, { email, password })\n    .then((user) => {\n      /* console.log(\"user\", user) */\n      if (user.status === 200) {\n        setCurrentUser(user.data.data);\n        put(loginUserSuccess(user.data.data));\n\n        NotificationManager.success(user.data.message);\n        if (user.data.data.role === \"seller\") {\n          history.push(\"/seller\")\n        } else if (user.data.data.role === \"buyer\") {\n          history.push(\"/buyer\")\n        }\n\n      } else if (user.status === 206) {\n        put(loginUserError(user.data.message))\n        NotificationManager.warning(user.data.message);\n      }\n    })\n    .catch((error) => NotificationManager.warning(error));\n\nfunction* loginWithEmailPassword({ payload }) {\n  const { email, password } = payload.user;\n  const { history } = payload;\n  \n   yield call(loginWithEmailPasswordAsync, email, password, history);\n}\n\nexport function* watchRegisterUser() {\n  \n  yield takeEvery(REGISTER_USER, registerWithEmailPassword);\n}\n\nconst registerWithEmailPasswordAsync = async (username, email, password, role, history) =>\n\nawait axios.post(`${API_URL}/user/register`, { username, email, password, role })\n    \n    .then((user) => {\n    \n      if (user.status === 200) {\n        put(registerUserSuccess(user.data.data))\n        NotificationManager.success(user.data.message);\n        history.push('/login')\n      } else if (user.status === 206) {\n        put(registerUserError(user.data.message))\n        NotificationManager.warning(user.data.message);\n      }\n\n    })\n    .catch((error) => {\n     \n      NotificationManager.warning(error, 'Registeration Error', 3000, null, null, '')\n    });\n\nfunction* registerWithEmailPassword({ payload }) {\n  console.log(\"value register\", payload)\n  const { username, email, password, role } = payload.user;\n  const { history } = payload;\n  try {\n    yield call(\n      registerWithEmailPasswordAsync,\n      username, email, password, role, history\n\n    );\n    /* console.log(\"register user data\", registerUser) */\n\n  } catch (error) {\n    yield put(registerUserError(error));\n  }\n}\n\nexport function* watchLogoutUser() {\n\n  yield takeEvery(LOGOUT_USER, logout);\n}\n\n\n\nfunction* logout({ payload }) {\n  const { history } = payload;\n  setCurrentUser();\n  history.push(\"/\");\n\n}\n\n\n\n\nexport default function* rootSaga() {\n  yield all([\n    fork(watchLoginUser),\n    fork(watchLogoutUser),\n    fork(watchRegisterUser),\n\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}